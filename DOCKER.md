# üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è sarcastic-bot

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
- **Windows**: [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- **Linux**: `sudo apt install docker.io docker-compose`
- **macOS**: [Docker Desktop](https://www.docker.com/products/docker-desktop/)

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```cmd
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
copy env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏:
# - TELEGRAM_BOT_TOKEN
# - OPENROUTER_API_KEY
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

#### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (Windows)
```cmd
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
run.cmd
```

#### –ß–µ—Ä–µ–∑ Docker Compose (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```cmd
docker-compose up -d
```

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```cmd
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
build.cmd
# –∏–ª–∏
docker build -t sarcastic-bot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d --name sarcastic-bot --env-file .env -v "%cd%\logs:/app/logs" sarcastic-bot
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```cmd
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
docker ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs sarcastic-bot-container

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f sarcastic-bot-container
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```cmd
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker stop sarcastic-bot-container

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker restart sarcastic-bot-container

# –£–¥–∞–ª–µ–Ω–∏–µ
docker rm sarcastic-bot-container
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–∑–∞

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑**: `python:3.11-slim`
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤**: `uv` (–±—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- **–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `/app`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `botuser` (–±–µ–∑ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π)
- **–ü–æ—Ä—Ç—ã**: –Ω–µ —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã (–±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram API)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–º. —Ñ–∞–π–ª `env.example` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### –ú–æ–Ω—Ç–∏—Ä—É–µ–º—ã–µ —Ç–æ–º–∞
- `./logs:/app/logs` - –ª–æ–≥–∏ –±–æ—Ç–∞
- (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) `./src:/app/src` - –≥–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞

## –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
```cmd
deploy.cmd
```

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π
```cmd
# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker stop sarcastic-bot-prod
docker rm sarcastic-bot-prod

# 2. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t sarcastic-bot:latest .

# 3. –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
docker run -d \
    --name sarcastic-bot-prod \
    --env-file .env \
    --restart unless-stopped \
    -v "./logs:/app/logs" \
    sarcastic-bot:latest
```

## –†–∞–∑–≤–∏—Ç–∏–µ –∏ CI/CD

### –ü—Ä–æ—Ñ–∏–ª–∏ Docker Compose
```cmd
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
docker-compose up

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
docker-compose --profile test up bot-test
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD
–§–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å:
- **GitHub Actions** (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker build` –∏ `docker push`)
- **Railway** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Dockerfile)
- **Heroku** (—á–µ—Ä–µ–∑ heroku.yml)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø–∞–ø–∫–µ `logs/`
- –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `docker ps`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ–µ: `--restart unless-stopped`

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot connect to Docker daemon"
**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏–ª—Å—è.

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"
**–†–µ—à–µ–Ω–∏–µ**: –ù–∞ Linux –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker:
```bash
sudo usermod -aG docker $USER
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs sarcastic-bot-container`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –≤ .env –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker ps`

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª—ã –ª–æ–≥–æ–≤ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `logs/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏.
